<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
    <link
      href="https://fonts.googleapis.com/css2?family=IBM+Plex+Mono:wght@400;500;600;700&display=swap"
      rel="stylesheet"
    />
    <link
      href="https://unpkg.com/tailwindcss@^1.0/dist/tailwind.min.css"
      rel="stylesheet"
    />
    <script src="https://unpkg.com/tailwindcss-jit-cdn"></script>
    <script
      src="https://cdn.jsdelivr.net/gh/alpinejs/alpine@v2.x.x/dist/alpine.min.js"
      defer
    ></script>
    <style>
      body {
        font-family: "IBM Plex Mono", sans-serif;
      }
      [x-cloak] {
        display: none;
      }

      .line {
        background: repeating-linear-gradient(
          to bottom,
          #eee,
          #eee 1px,
          #fff 1px,
          #fff 8%
        );
      }
      .tick {
        background: repeating-linear-gradient(
          to right,
          #eee,
          #eee 1px,
          #fff 1px,
          #fff 5%
        );
      }
      section {
        font-family: "Inter", sans-serif;
      }
    </style>
  </head>
  <body>
    <div class="antialiased sans-serif bg-gray-200 w-lg min-h-screen">
      <div x-data="app()" x-cloak class="px-4">
        <div class="max-w-lg mx-auto py-10">
          <div class="shadow p-6 rounded-lg bg-white">
            <div class="md:flex md:justify-between md:items-center">
              <div>
                <h2 class="text-xl text-gray-800 font-bold leading-tight">
                  Machine Report
                </h2>
                <p class="mb-2 text-gray-600 text-sm">Monthly Average</p>
              </div>

              <!-- Legends -->
              <div class="mb-4">
                <div class="flex items-center">
                  <div class="w-2 h-2 bg-blue-600 mr-2 rounded-full"></div>
                  <div class="text-sm text-gray-700">Temperature</div>
                </div>
              </div>
            </div>

            <div class="line my-8 relative">
              <!-- Tooltip -->
              <template x-if="tooltipOpen == true">
                <div
                  x-ref="tooltipContainer"
                  class="p-0 m-0 z-10 shadow-lg rounded-lg absolute h-auto block"
                  :style="`bottom: ${tooltipY}px; left: ${tooltipX}px`"
                >
                  <div class="shadow-xs rounded-lg bg-white p-2">
                    <div class="flex items-center justify-between text-sm">
                      <div>Temperature:</div>
                      <div class="font-bold ml-2">
                        <span x-html="tooltipContent"></span>
                      </div>
                    </div>
                  </div>
                </div>
              </template>

              <!-- Bar Chart -->
              <div class="flex -mx-2 items-end mb-2">
                <template x-for="data in chartData">
                  <div class="px-2 w-1/6">
                    <div
                      :style="`height: ${data}px`"
                      class="transition ease-in duration-200 bg-blue-600 hover:bg-blue-400 relative"
                      @mouseenter="showTooltip($event); tooltipOpen = true"
                      @mouseleave="hideTooltip($event)"
                    >
                      <div
                        x-text="data"
                        class="text-center absolute top-0 left-0 right-0 -mt-6 text-gray-800 text-sm"
                      ></div>
                    </div>
                  </div>
                </template>
              </div>

              <!-- Labels -->
              <div
                class="border-t border-gray-400 mx-auto"
                :style="`height: 1px; width: ${ 100 - 1/chartData.length*100 + 3}%`"
              ></div>
              <div class="flex -mx-2 items-end">
                <template x-for="data in labels">
                  <div class="px-2 w-1/6">
                    <div class="bg-red-600 relative">
                      <div
                        class="text-center absolute top-0 left-0 right-0 h-2 -mt-px bg-gray-400 mx-auto"
                        style="width: 1px"
                      ></div>
                      <div
                        x-text="data"
                        class="text-center absolute top-0 left-0 right-0 mt-3 text-gray-700 text-sm"
                      ></div>
                    </div>
                  </div>
                </template>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- analytics section start -->
      <section
        class="flex flex-col justify-center antialiased bg-gray-100 text-gray-600 min-h-screen"
      >
        <div class="max-w-3xl mx-auto p-4 sm:px-6 h-full">
          <!-- Chart widget -->
          <div
            class="flex flex-col col-span-full xl:col-span-8 bg-white shadow-lg rounded-sm border border-gray-200"
          >
            <header
              class="px-5 py-4 border-b border-gray-100 flex items-center"
            >
              <h2 class="font-semibold text-gray-800">Analytics</h2>
            </header>
            <div class="px-5 py-1">
              <div class="flex flex-wrap">
                <!-- Unique Visitors -->
                <div class="flex items-center py-2">
                  <div class="mr-5">
                    <div class="flex items-center">
                      <div class="text-3xl font-bold text-gray-800 mr-2">
                        24.7K
                      </div>
                      <div class="text-sm font-medium text-green-500">+49%</div>
                    </div>
                    <div class="text-sm text-gray-500">Unique Visitors</div>
                  </div>
                  <div
                    class="hidden md:block w-px h-8 bg-gray-200 mr-5"
                    aria-hidden="true"
                  ></div>
                </div>
                <!-- Total Pageviews -->
                <div class="flex items-center py-2">
                  <div class="mr-5">
                    <div class="flex items-center">
                      <div class="text-3xl font-bold text-gray-800 mr-2">
                        56.9K
                      </div>
                      <div class="text-sm font-medium text-green-500">+7%</div>
                    </div>
                    <div class="text-sm text-gray-500">Total Pageviews</div>
                  </div>
                  <div
                    class="hidden md:block w-px h-8 bg-gray-200 mr-5"
                    aria-hidden="true"
                  ></div>
                </div>
                <!-- Bounce Rate -->
                <div class="flex items-center py-2">
                  <div class="mr-5">
                    <div class="flex items-center">
                      <div class="text-3xl font-bold text-gray-800 mr-2">
                        54%
                      </div>
                      <div class="text-sm font-medium text-yellow-500">-7%</div>
                    </div>
                    <div class="text-sm text-gray-500">Bounce Rate</div>
                  </div>
                  <div
                    class="hidden md:block w-px h-8 bg-gray-200 mr-5"
                    aria-hidden="true"
                  ></div>
                </div>
                <!-- Visit Duration-->
                <div class="flex items-center">
                  <div>
                    <div class="flex items-center">
                      <div class="text-3xl font-bold text-gray-800 mr-2">
                        2m 56s
                      </div>
                      <div class="text-sm font-medium text-yellow-500">+7%</div>
                    </div>
                    <div class="text-sm text-gray-500">Visit Duration</div>
                  </div>
                </div>
              </div>
            </div>
            <!-- Chart built with Chart.js 3 -->
            <div class="flex-grow">
              <canvas id="analytics-card-01" width="800" height="300"></canvas>
            </div>
          </div>
        </div>
      </section>

      <!-- More components -->
      <div
        x-show="open"
        class="fixed bottom-0 right-0 w-full md:bottom-8 md:right-12 md:w-auto z-60"
        x-data="{ open: true }"
      >
        <div
          class="bg-gray-800 text-gray-50 text-sm p-3 md:rounded shadow-lg flex justify-between"
        >
          <div>
            ðŸ‘‰
            <a
              class="hover:underline ml-1"
              href="https://cruip.com/mosaic/?ref=codepen-cruip-analytics"
              target="_blank"
              >More components on Cruip.com</a
            >
          </div>
          <button
            class="text-gray-500 hover:text-gray-400 ml-5"
            @click="open = false"
          >
            <span class="sr-only">Close</span>
            <svg class="w-4 h-4 flex-shrink-0 fill-current" viewBox="0 0 16 16">
              <path
                d="M12.72 3.293a1 1 0 00-1.415 0L8.012 6.586 4.72 3.293a1 1 0 00-1.414 1.414L6.598 8l-3.293 3.293a1 1 0 101.414 1.414l3.293-3.293 3.293 3.293a1 1 0 001.414-1.414L9.426 8l3.293-3.293a1 1 0 000-1.414z"
              />
            </svg>
          </button>
        </div>
      </div>
      <!-- analytics section end -->

      <script>
        function app() {
          return {
            chartData: [112, 10, 225, 134, 101, 80, 50, 100, 200],
            labels: [
              "Jan",
              "Feb",
              "Mar",
              "Apr",
              "May",
              "Jun",
              "Jul",
              "Aug",
              "Sep",
            ],

            tooltipContent: "",
            tooltipOpen: false,
            tooltipX: 0,
            tooltipY: 0,
            showTooltip(e) {
              console.log(e);
              this.tooltipContent = e.target.textContent;
              this.tooltipX = e.target.offsetLeft - e.target.clientWidth;
              this.tooltipY = e.target.clientHeight + e.target.clientWidth;
            },
            hideTooltip(e) {
              this.tooltipContent = "";
              this.tooltipOpen = false;
              this.tooltipX = 0;
              this.tooltipY = 0;
            },
          };
        }

        // analytics helper fucntion

        // Helper function to display thousands in K format
        const formatThousands = (value) =>
          Intl.NumberFormat("en-US", {
            maximumSignificantDigits: 3,
            notation: "compact",
          }).format(value);

        // Define Chart.js default settings
        Chart.defaults.font.family = '"Inter", sans-serif';
        Chart.defaults.font.weight = "500";
        Chart.defaults.color = "rgb(148, 163, 184)";
        Chart.defaults.scale.grid.color = "rgb(241, 245, 249)";
        Chart.defaults.plugins.tooltip.titleColor = "rgb(30, 41, 59)";
        Chart.defaults.plugins.tooltip.bodyColor = "rgb(30, 41, 59)";
        Chart.defaults.plugins.tooltip.backgroundColor = "#FFF";
        Chart.defaults.plugins.tooltip.borderWidth = 1;
        Chart.defaults.plugins.tooltip.borderColor = "rgb(226, 232, 240)";
        Chart.defaults.plugins.tooltip.displayColors = false;
        Chart.defaults.plugins.tooltip.mode = "nearest";
        Chart.defaults.plugins.tooltip.intersect = false;
        Chart.defaults.plugins.tooltip.position = "nearest";
        Chart.defaults.plugins.tooltip.caretSize = 0;
        Chart.defaults.plugins.tooltip.caretPadding = 20;
        Chart.defaults.plugins.tooltip.cornerRadius = 4;
        Chart.defaults.plugins.tooltip.padding = 8;

        // A chart built with Chart.js 3
        // https://www.chartjs.org/
        const ctx = document.getElementById("analytics-card-01");
        const chart = new Chart(ctx, {
          type: "line",
          data: {
            labels: [
              "12-01-2020",
              "01-01-2021",
              "02-01-2021",
              "03-01-2021",
              "04-01-2021",
              "05-01-2021",
              "06-01-2021",
              "07-01-2021",
              "08-01-2021",
              "09-01-2021",
              "10-01-2021",
              "11-01-2021",
              "12-01-2021",
              "01-01-2022",
              "02-01-2022",
              "03-01-2022",
              "04-01-2022",
              "05-01-2022",
              "06-01-2022",
              "07-01-2022",
              "08-01-2022",
              "09-01-2022",
              "10-01-2022",
              "11-01-2022",
              "12-01-2022",
              "01-01-2023",
            ],
            datasets: [
              // Indigo line
              {
                label: "Current",
                data: [
                  5000, 8700, 7500, 12000, 11000, 9500, 10500, 10000, 15000,
                  9000, 10000, 7000, 22000, 7200, 9800, 9000, 10000, 8000,
                  15000, 12000, 11000, 13000, 11000, 15000, 17000, 18000,
                ],
                fill: true,
                backgroundColor: "rgba(59, 130, 246, 0.08)",
                borderColor: "rgb(99, 102, 241)",
                borderWidth: 2,
                tension: 0,
                pointRadius: 0,
                pointHoverRadius: 3,
                pointBackgroundColor: "rgb(99, 102, 241)",
              },
              // Gray line
              {
                label: "Previous",
                data: [
                  8000, 5000, 6500, 5000, 6500, 12000, 8000, 9000, 8000, 8000,
                  12500, 10000, 10000, 12000, 11000, 16000, 12000, 10000, 10000,
                  14000, 9000, 10000, 15000, 12500, 14000, 11000,
                ],
                borderColor: "rgb(203, 213, 225)",
                fill: false,
                borderWidth: 2,
                tension: 0,
                pointRadius: 0,
                pointHoverRadius: 3,
                pointBackgroundColor: "rgb(203, 213, 225)",
              },
            ],
          },
          options: {
            layout: {
              padding: 20,
            },
            scales: {
              y: {
                beginAtZero: true,
                grid: {
                  drawBorder: false,
                },
                ticks: {
                  callback: (value) => formatThousands(value),
                },
              },
              x: {
                type: "time",
                time: {
                  parser: "MM-DD-YYYY",
                  unit: "month",
                  displayFormats: {
                    month: "MMM YY",
                  },
                },
                grid: {
                  display: false,
                  drawBorder: false,
                },
                ticks: {
                  autoSkipPadding: 48,
                  maxRotation: 0,
                },
              },
            },
            plugins: {
              legend: {
                display: false,
              },
              tooltip: {
                callbacks: {
                  title: () => false, // Disable tooltip title
                  label: (context) => formatThousands(context.parsed.y),
                },
              },
            },
            interaction: {
              intersect: false,
              mode: "nearest",
            },
            maintainAspectRatio: false,
          },
        });
      </script>
    </div>
  </body>
</html>
